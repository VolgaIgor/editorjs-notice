!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.NoticeTune=e():t.NoticeTune=e()}(self,(()=>(()=>{"use strict";var t={822:(t,e,n)=>{n.d(e,{Z:()=>o});var i=n(645),r=n.n(i)()((function(t){return t[1]}));r.push([t.id,".notice-tune__input {\r\n        padding-left: 45px;\r\n        background-repeat: no-repeat;\r\n        background-position: 15px;\r\n        margin: 10px 0;\r\n    }\r\n    .notice-tune__content {\r\n        position: relative;\r\n        max-width: 650px;\r\n        margin: 0 auto;\r\n        display: none;\r\n    }\r\n    .notice-tune .notice-tune__content {\r\n        display: block;\r\n    }\r\n    .notice-tune~.notice-tune .notice-tune__content {\r\n        margin-top: 1.5em;\r\n    }\r\n    .notice-tune--info+.notice-tune--info .notice-tune__content,\r\n    .notice-tune--warning+.notice-tune--warning .notice-tune__content,\r\n    .notice-tune--spoiler+.notice-tune--spoiler .notice-tune__content {\r\n        display: none;\r\n    }\r\n    .notice-tune--info .notice-tune__wrapper {\r\n            border-left: 10px solid #5cb6ff;\r\n            padding-left: 12px;\r\n        }\r\n    .notice-tune--info .notice-tune__input {\r\n            border-color: #5cb6ff;\r\n        }\r\n    .notice-tune--warning .notice-tune__wrapper {\r\n            border-left: 10px solid #ffd025;\r\n            padding-left: 12px;\r\n        }\r\n    .notice-tune--warning .notice-tune__input {\r\n            border-color: #ffd025;\r\n        }\r\n    .notice-tune--spoiler .notice-tune__wrapper {\r\n            border-left: 10px solid #424242;\r\n            padding-left: 12px;\r\n        }\r\n    .notice-tune--spoiler .notice-tune__input {\r\n            border-color: #424242;\r\n        }",""]);const o=r},645:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=t(e);return e[2]?"@media ".concat(e[2]," {").concat(n,"}"):n})).join("")},e.i=function(t,n,i){"string"==typeof t&&(t=[[null,t,""]]);var r={};if(i)for(var o=0;o<this.length;o++){var a=this[o][0];null!=a&&(r[a]=!0)}for(var c=0;c<t.length;c++){var l=[].concat(t[c]);i&&r[l[0]]||(n&&(l[2]?l[2]="".concat(n," and ").concat(l[2]):l[2]=n),e.push(l))}},e}},379:(t,e,n)=>{var i,r=function(){var t={};return function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}t[e]=n}return t[e]}}(),o=[];function a(t){for(var e=-1,n=0;n<o.length;n++)if(o[n].identifier===t){e=n;break}return e}function c(t,e){for(var n={},i=[],r=0;r<t.length;r++){var c=t[r],l=e.base?c[0]+e.base:c[0],s=n[l]||0,u="".concat(l," ").concat(s);n[l]=s+1;var d=a(u),p={css:c[1],media:c[2],sourceMap:c[3]};-1!==d?(o[d].references++,o[d].updater(p)):o.push({identifier:u,updater:v(p,e),references:1}),i.push(u)}return i}function l(t){var e=document.createElement("style"),i=t.attributes||{};if(void 0===i.nonce){var o=n.nc;o&&(i.nonce=o)}if(Object.keys(i).forEach((function(t){e.setAttribute(t,i[t])})),"function"==typeof t.insert)t.insert(e);else{var a=r(t.insert||"head");if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(e)}return e}var s,u=(s=[],function(t,e){return s[t]=e,s.filter(Boolean).join("\n")});function d(t,e,n,i){var r=n?"":i.media?"@media ".concat(i.media," {").concat(i.css,"}"):i.css;if(t.styleSheet)t.styleSheet.cssText=u(e,r);else{var o=document.createTextNode(r),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(o,a[e]):t.appendChild(o)}}function p(t,e,n){var i=n.css,r=n.media,o=n.sourceMap;if(r?t.setAttribute("media",r):t.removeAttribute("media"),o&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleSheet)t.styleSheet.cssText=i;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(i))}}var f=null,h=0;function v(t,e){var n,i,r;if(e.singleton){var o=h++;n=f||(f=l(e)),i=d.bind(null,n,o,!1),r=d.bind(null,n,o,!0)}else n=l(e),i=p.bind(null,n,e),r=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(n)};return i(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;i(t=e)}else r()}}t.exports=function(t,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=(void 0===i&&(i=Boolean(window&&document&&document.all&&!window.atob)),i));var n=c(t=t||[],e);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var i=0;i<n.length;i++){var r=a(n[i]);o[r].references--}for(var l=c(t,e),s=0;s<n.length;s++){var u=a(n[s]);0===o[u].references&&(o[u].updater(),o.splice(u,1))}n=l}}}}},e={};function n(i){var r=e[i];if(void 0!==r)return r.exports;var o=e[i]={id:i,exports:{}};return t[i](o,o.exports,n),o.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.nc=void 0;var i={};return(()=>{n.d(i,{default:()=>l});var t=n(379),e=n.n(t),r=n(822);function o(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function c(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}e()(r.Z,{insert:"head",singleton:!1}),r.Z.locals;var l=function(){function t(e){var n=this,i=e.api,r=e.data,o=e.config,a=e.block;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.api=i,this.data={style:void 0,caption:""},r&&r.style&&t.tunes.find((function(t){return t.name===r.style}))&&(this.data={style:r.style,caption:r.caption||""}),this.config={captionPlaceholder:this.api.i18n.t(o.captionPlaceholder||"Notice caption")},this.block=a,this.input=s("input",[this.CSS.input,this.CSS.blockInput],{type:"text",placeholder:this.config.captionPlaceholder}),this.data.style){var c=new MutationObserver((function(){n.block.holder&&(n.block.holder.classList.add(n.CSS.baseTemplate),n.block.holder.classList.add("".concat(n.CSS.baseTemplate,"--").concat(n.data.style)),c.disconnect())}));c.observe(this.api.ui.nodes.redactor,{childList:!0})}}var e,n,i;return e=t,i=[{key:"isTune",get:function(){return!0}},{key:"tunes",get:function(){return[{name:"spoiler",icon:'<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" viewBox="0 0 16 16">\r\n  <path d="M13.359 11.238C15.06 9.72 16 8 16 8s-3-5.5-8-5.5a7.028 7.028 0 0 0-2.79.588l.77.771A5.944 5.944 0 0 1 8 3.5c2.12 0 3.879 1.168 5.168 2.457A13.134 13.134 0 0 1 14.828 8c-.058.087-.122.183-.195.288-.335.48-.83 1.12-1.465 1.755-.165.165-.337.328-.517.486l.708.709z"/>\r\n  <path d="M11.297 9.176a3.5 3.5 0 0 0-4.474-4.474l.823.823a2.5 2.5 0 0 1 2.829 2.829l.822.822zm-2.943 1.299.822.822a3.5 3.5 0 0 1-4.474-4.474l.823.823a2.5 2.5 0 0 0 2.829 2.829z"/>\r\n  <path d="M3.35 5.47c-.18.16-.353.322-.518.487A13.134 13.134 0 0 0 1.172 8l.195.288c.335.48.83 1.12 1.465 1.755C4.121 11.332 5.881 12.5 8 12.5c.716 0 1.39-.133 2.02-.36l.77.772A7.029 7.029 0 0 1 8 13.5C3 13.5 0 8 0 8s.939-1.721 2.641-3.238l.708.709zm10.296 8.884-12-12 .708-.708 12 12-.708.708z"/>\r\n</svg>',title:"Spoiler"},{name:"info",icon:'<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" viewBox="0 0 16 16">\r\n  <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>\r\n  <path d="m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533L8.93 6.588zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"/>\r\n</svg>',title:"Info"},{name:"warning",icon:'<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" viewBox="0 0 16 16">\r\n  <path d="M7.001 11a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 4.995a.905.905 0 1 1 1.8 0l-.35 3.507a.553.553 0 0 1-1.1 0L7.1 4.995z"/>\r\n  <path d="m10.273 2.513-.921-.944.715-.698.622.637.89-.011a2.89 2.89 0 0 1 2.924 2.924l-.01.89.636.622a2.89 2.89 0 0 1 0 4.134l-.637.622.011.89a2.89 2.89 0 0 1-2.924 2.924l-.89-.01-.622.636a2.89 2.89 0 0 1-4.134 0l-.622-.637-.89.011a2.89 2.89 0 0 1-2.924-2.924l.01-.89-.636-.622a2.89 2.89 0 0 1 0-4.134l.637-.622-.011-.89a2.89 2.89 0 0 1 2.924-2.924l.89.01.622-.636a2.89 2.89 0 0 1 4.134 0l-.715.698a1.89 1.89 0 0 0-2.704 0l-.92.944-1.32-.016a1.89 1.89 0 0 0-1.911 1.912l.016 1.318-.944.921a1.89 1.89 0 0 0 0 2.704l.944.92-.016 1.32a1.89 1.89 0 0 0 1.912 1.911l1.318-.016.921.944a1.89 1.89 0 0 0 2.704 0l.92-.944 1.32.016a1.89 1.89 0 0 0 1.911-1.912l-.016-1.318.944-.921a1.89 1.89 0 0 0 0-2.704l-.944-.92.016-1.32a1.89 1.89 0 0 0-1.912-1.911l-1.318.016z"/>\r\n</svg>',title:"Warning"}]}}],(n=[{key:"CSS",get:function(){return{input:this.api.styles.input,buttonBase:this.api.styles.settingsButton,buttonActive:this.api.styles.settingsButtonActive,baseTemplate:"notice-tune",tuneWrapper:"notice-tune__tune-wrapper",tuneButton:"notice-tune__tune-button",blockWrapper:"notice-tune__wrapper",blockContent:"notice-tune__content",blockInput:"notice-tune__input"}}},{key:"fillIcon",value:function(){var e=this;if(this.data.style){var n=t.tunes.find((function(t){return t.name===e.data.style})),i=encodeURIComponent(n.icon);this.input.style.backgroundImage="url(data:image/svg+xml,".concat(i,")")}else this.input.style.backgroundImage=""}},{key:"fillTunes",value:function(){var t=this;this.buttons.forEach((function(e){e.classList.toggle(t.CSS.buttonActive,e.dataset.tune===t.data.style),t.block.holder.classList.toggle("".concat(t.CSS.baseTemplate,"--").concat(e.dataset.tune),e.dataset.tune===t.data.style)}))}},{key:"render",value:function(){var e=this,n=s("div",this.CSS.tuneWrapper);return this.buttons=[],t.tunes.forEach((function(t){var i=e.api.i18n.t(t.title),r=s("div",[e.CSS.buttonBase,e.CSS.tuneButton],{innerHTML:t.icon,title:i});r.addEventListener("click",(function(){e.tuneClicked(t.name)})),r.dataset.tune=t.name,e.buttons.push(r),e.api.tooltip.onHover(r,i,{placement:"top"}),n.appendChild(r)})),this.fillTunes(),n}},{key:"wrap",value:function(t){var e=s("div",this.CSS.blockWrapper),n=s("div",this.CSS.blockContent);return this.input.value=this.data.caption,this.fillIcon(),n.appendChild(this.input),e.appendChild(n),e.appendChild(t),e}},{key:"tuneClicked",value:function(e){var n=this.data.style;this.data.style===e?(this.data.style=void 0,this.block.holder.classList.remove(this.CSS.baseTemplate)):t.tunes.find((function(t){return t.name===e}))&&(this.data.style=e,this.block.holder.classList.add(this.CSS.baseTemplate));var i=this.data.style;n!==i&&(this.checkNeighbor(n,i),this.fillIcon(),this.fillTunes())}},{key:"checkNeighbor",value:function(t,e){var n=this.api.blocks.getCurrentBlockIndex(),i=this.api.blocks.getBlockByIndex(n-1),r=this.api.blocks.getBlockByIndex(n+1);if(void 0!==t&&(void 0===i||!i.holder.classList.contains("".concat(this.CSS.baseTemplate,"--").concat(t)))&&void 0!==r&&r.holder.classList.contains("".concat(this.CSS.baseTemplate,"--").concat(t))&&0!==this.input.value.length){var o=r.holder.querySelector(".".concat(this.CSS.blockInput));o&&(o.value=this.input.value)}if(void 0!==e&&(void 0===i||!i.holder.classList.contains("".concat(this.CSS.baseTemplate,"--").concat(e)))&&void 0!==r&&r.holder.classList.contains("".concat(this.CSS.baseTemplate,"--").concat(e))){var a=r.holder.querySelector(".".concat(this.CSS.blockInput));a&&0!==a.value.length&&(this.input.value=a.value)}}},{key:"save",value:function(){if(this.data.style)return this.data.caption=this.input.value,this.data}}])&&c(e.prototype,n),i&&c(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}(),s=function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=document.createElement(t);for(var a in Array.isArray(n)?(e=r.classList).add.apply(e,o(n)):n&&r.classList.add(n),i)r[a]=i[a];return r}})(),i.default})()));